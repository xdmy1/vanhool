<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inter Bus - Rare Bus Parts Supplier</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="css/custom-colors.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-white min-h-screen font-inter">
    <!-- Header -->
    <header class="bg-white backdrop-blur-lg shadow-sm sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-4 lg:px-8">
            <nav class="flex items-center justify-between h-16 lg:h-20">
                <!-- Left: Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center hover:opacity-80 transition-opacity">
                        <img src="LOGO1 1.svg" alt="Inter Bus" class="h-8 lg:h-10 w-auto">
                    </a>
                </div>
                    
                <!-- Center: Navigation -->
                <div class="flex-1 flex justify-center">
                    <!-- Desktop Navigation -->
                    <div class="hidden lg:flex items-center space-x-8">
                        <!-- Categories Dropdown -->
                        <div class="relative" onmouseenter="showDropdown()" onmouseleave="hideDropdown()">
                            <button onclick="toggleDropdown()" class="flex items-center space-x-1 text-gray-600 hover:text-red-600 py-2 font-medium transition-colors">
                                <i class="fas fa-th-large mr-1"></i>
                                <span data-translate="categories">Categories</span>
                                <i class="fas fa-chevron-down text-sm ml-1 group-hover:rotate-180 transition-transform duration-200"></i>
                            </button>
                            <!-- Compact Categories Dropdown -->
                            <div id="categories-dropdown-menu" class="absolute top-full left-0 bg-white shadow-lg border rounded-md z-50 w-56 sm:w-64 max-h-80 overflow-y-auto" style="display: none;">
                                <div id="categories-dropdown" class="p-2">
                                    <!-- Loading state -->
                                    <div class="py-4 text-center">
                                        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-red-600 mx-auto mb-1"></div>
                                        <p class="text-xs text-gray-500">Loading...</p>
                                    </div>
                                </div>
                                <div class="border-t p-2">
                                    <a href="catalog.html" class="block text-center text-xs text-red-600 hover:text-red-700 font-medium">
                                        View All ‚Üí
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Regular Navigation Links -->
                        <a href="catalog.html" class="text-gray-600 hover:text-red-600 font-medium transition-colors px-3 py-2 rounded-lg hover:bg-red-50" data-translate="catalog">Catalog</a>
                        <a href="about.html" class="text-gray-600 hover:text-red-600 font-medium transition-colors px-3 py-2 rounded-lg hover:bg-red-50" data-translate="about">About</a>
                        <a href="contact.html" class="text-gray-600 hover:text-red-600 font-medium transition-colors px-3 py-2 rounded-lg hover:bg-red-50" data-translate="contact">Contact</a>
                    </div>

                    <!-- Tablet Navigation -->
                    <div class="hidden md:flex lg:hidden items-center space-x-4">
                        <a href="catalog.html" class="text-gray-600 hover:text-red-600 font-medium transition-colors" data-translate="catalog">Catalog</a>
                        <div class="relative group">
                            <button class="flex items-center space-x-1 text-gray-600 hover:text-red-600 py-2 font-medium transition-colors">
                                <i class="fas fa-th-large"></i>
                                <i class="fas fa-chevron-down text-sm"></i>
                            </button>
                            <div id="tablet-categories-dropdown" class="absolute top-full right-0 bg-white shadow-lg border rounded-lg hidden group-hover:block z-50 w-48">
                                <div class="p-3">
                                    <div class="text-center py-4">
                                        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-red-600 mx-auto mb-2"></div>
                                        <p class="text-xs text-gray-500">Loading...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right: User Actions -->
                <div class="flex items-center">
                    <!-- Right Side Navigation -->
                <div class="flex items-center space-x-2 lg:space-x-4">
                    <!-- Mobile menu button -->
                    <button id="mobile-menu-button" class="lg:hidden flex items-center px-3 py-2 rounded-lg text-gray-600 hover:text-red-600 hover:bg-red-50 transition-all duration-200">
                        <i class="fas fa-bars text-lg"></i>
                    </button>
                    
                    <!-- Language Switcher -->
                    <div class="relative hidden sm:block">
                        <button onclick="toggleLanguageDropdown()" class="flex items-center space-x-1 text-gray-700 hover:text-red-600 py-2 px-2 lg:px-3 rounded-md transition-colors">
                            <span id="current-lang" class="text-sm font-medium">EN</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="language-dropdown" class="absolute top-full right-0 bg-white shadow-lg border rounded-lg hidden z-50 min-w-max">
                            <button onclick="setLanguage('en')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left">üá¨üáß English</button>
                            <button onclick="setLanguage('ro')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left">üá∑üá¥ Rom√¢nƒÉ</button>
                            <button onclick="setLanguage('ru')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
                        </div>
                    </div>
                    
                    <!-- Cart Icon -->
                    <div class="relative">
                        <a href="cart.html" class="flex items-center text-gray-600 hover:text-red-600 transition-colors p-2 rounded-lg hover:bg-red-50">
                            <i class="fas fa-shopping-cart text-lg"></i>
                            <span id="cart-counter" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium">0</span>
                        </a>
                    </div>
                    
                    <!-- Auth Links -->
                    <div id="auth-links" class="hidden md:flex items-center space-x-3">
                        <a href="login.html" class="text-gray-600 hover:text-red-600 font-medium transition-colors" data-translate="login">Login</a>
                        <a href="register.html" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-sm hover:shadow-md" data-translate="register">Register</a>
                    </div>
                </div>
                </div>
            </nav>
            
            <!-- Mobile menu -->
            <div id="mobile-menu" class="lg:hidden hidden bg-white border-t shadow-lg max-h-screen overflow-y-auto">
                <div class="px-4 py-3 space-y-2">
                    <!-- Main Navigation -->
                    <div class="space-y-1">
                        <a href="catalog.html" class="block px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors font-medium" data-translate="catalog">
                            <i class="fas fa-th-grid mr-2"></i>Catalog
                        </a>
                        <a href="about.html" class="block px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors font-medium" data-translate="about">
                            <i class="fas fa-info-circle mr-2"></i>About
                        </a>
                        <a href="cart.html" class="flex items-center justify-between px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                            <span class="flex items-center">
                                <i class="fas fa-shopping-cart mr-2"></i>Shopping Cart
                            </span>
                            <span id="mobile-cart-counter" class="hidden bg-red-500 text-white text-xs rounded-full px-2 py-1 font-medium">0</span>
                        </a>
                        <a href="contact.html" class="block px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors" data-translate="contact">
                            <i class="fas fa-envelope mr-2"></i>Contact
                        </a>
                    </div>
                    
                    <!-- Collapsible Categories -->
                    <div class="border-t pt-2">
                        <button id="mobile-categories-toggle" class="w-full flex items-center justify-between px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                            <span class="flex items-center">
                                <i class="fas fa-list mr-2"></i>Categories
                            </span>
                            <i class="fas fa-chevron-down text-sm transform transition-transform duration-200"></i>
                        </button>
                        <div id="mobile-categories-dropdown" class="hidden mt-1 space-y-1 pl-4 max-h-48 overflow-y-auto">
                            <div class="text-center py-3">
                                <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-red-600 mx-auto mb-2"></div>
                                <p class="text-xs text-gray-500">Loading categories...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Language Switcher -->
                    <div class="border-t pt-2">
                        <div class="flex justify-center space-x-4">
                            <button onclick="setLanguage('en')" class="px-2 py-1 text-sm text-gray-600 hover:text-red-600 transition-colors">üá¨üáß EN</button>
                            <button onclick="setLanguage('ro')" class="px-2 py-1 text-sm text-gray-600 hover:text-red-600 transition-colors">üá∑üá¥ RO</button>
                            <button onclick="setLanguage('ru')" class="px-2 py-1 text-sm text-gray-600 hover:text-red-600 transition-colors">üá∑üá∫ RU</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 overflow-hidden">
        <img src="bus.png" alt="Van Hool Bus" class="lg:hidden absolute top-6 right-16 -z-10 w-28 object-cover">
        <img src="bus.png" alt="Van Hool Bus" class="hidden lg:block absolute bottom-48 right-48 -z-10 w-64  object-cover">
        <div class="absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,white,rgba(255,121,12,1))] -z-10"></div>
        <div class="container mx-auto px-4 pt-20 pb-16 lg:pt-28 lg:pb-24">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-16">
                    <div class="inline-flex items-center px-4 py-2 bg-blue-50 border border-blue-200 rounded-full text-blue-700 text-sm font-medium mb-8">
                        <i class="fas fa-truck mr-2"></i>
                        <span data-translate="trusted_worldwide">Trusted worldwide since 1999</span>
                    </div>
                    <h1 class="text-4xl lg:text-7xl font-bold mb-6 text-slate-900 leading-tight" data-translate="hero_title">
                        Premium Bus Parts
                    </h1>
                    <p class="text-xl lg:text-2xl mb-10 text-slate-600 max-w-3xl mx-auto leading-relaxed" data-translate="hero_subtitle">
                        Your trusted source for authentic bus parts and components. Quality parts, global shipping, expert support.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center mb-16">
                        <a href="catalog.html" class="bg-slate-900 px-8 py-4 rounded-xl font-semibold text-lg hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1" data-translate="view_catalog">
                            Browse Catalog
                        </a>
                        <a href="contact.html" class="bg-white text-slate-900 px-8 py-4 rounded-xl font-semibold text-lg border-2 border-slate-200 hover:border-slate-300 transition-all hover:shadow-lg" data-translate="contact_us">
                            Get Quote
                        </a>
                    </div>
                </div>
                
                <!-- Modern Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-2xl p-8 text-center shadow-lg border border-slate-100">
                        <div class="text-4xl font-bold text-slate-900 mb-2" id="parts-count">2000+</div>
                        <div class="text-slate-600 font-medium" data-translate="parts_available">Parts Available</div>
                    </div>
                    <div class="bg-white rounded-2xl p-8 text-center shadow-lg border border-slate-100">
                        <div class="text-4xl font-bold text-slate-900 mb-2">50+</div>
                        <div class="text-slate-600 font-medium" data-translate="countries_served">Countries Served</div>
                    </div>
                    <div class="bg-white rounded-2xl p-8 text-center shadow-lg border border-slate-100">
                        <div class="text-4xl font-bold text-slate-900 mb-2">25+</div>
                        <div class="text-slate-600 font-medium" data-translate="years_experience">Years Experience</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-6" data-translate="about_inter_bus">
                    About Inter Bus
                </h2>
                <p class="text-lg text-gray-600 mb-8 leading-relaxed" data-translate="about_description">
                    Inter Bus is your trusted supplier of authentic bus parts and components worldwide. We specialize in providing hard-to-find, rare parts for all bus models, ensuring your fleet stays operational and safe. With over 25 years of experience in the industry, we maintain an extensive inventory of genuine parts and high-quality alternatives that meet or exceed OEM standards.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-cogs text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2" data-translate="authentic_parts">Authentic Parts</h3>
                        <p class="text-gray-600 text-sm" data-translate="authentic_parts_desc">Genuine components from trusted manufacturers</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shipping-fast text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2" data-translate="global_shipping">Global Shipping</h3>
                        <p class="text-gray-600 text-sm" data-translate="global_shipping_desc">Fast, reliable delivery to 50+ countries worldwide</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-users text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-2" data-translate="expert_support">Expert Support</h3>
                        <p class="text-gray-600 text-sm" data-translate="expert_support_desc">Professional guidance from experienced specialists</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4" data-translate="latest_parts">
                    Latest Parts
                </h2>
                <p class="text-gray-600 max-w-2xl mx-auto" data-translate="latest_parts_desc">
                    Discover our bus parts collection. All parts come with detailed specifications and authentic part numbers.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="featured-products">
                <!-- Latest products will be loaded here -->
                <div class="text-center py-8 col-span-full">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"></div>
                    <p class="mt-2 text-gray-500">Loading products...</p>
                </div>
            </div>
            
            <div class="text-center mt-12">
                <a href="catalog.html" class="bg-red-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-red-700 transition-colors" data-translate="see_all_parts">
                    See All Parts
                </a>
            </div>
        </div>
    </section>

    <!-- Universal App System -->
    <script src="js/app-universal.js"></script>
    <script type="module" src="js/config.js"></script>
    <!-- <script src="js/categories-dropdown.js"></script> -->
    
    <script>
        console.log('üî• Index page loaded with universal system');
        
        // Dropdown functions
        function showDropdown() {
            console.log('üîº Showing dropdown...');
            const dropdown = document.getElementById('categories-dropdown-menu');
            if (dropdown) {
                dropdown.style.display = 'block';
                console.log('‚úÖ Dropdown shown');
            } else {
                console.log('‚ùå Dropdown menu element not found');
            }
        }
        
        function hideDropdown() {
            console.log('üîΩ Hiding dropdown...');
            const dropdown = document.getElementById('categories-dropdown-menu');
            if (dropdown) {
                dropdown.style.display = 'none';
                console.log('‚úÖ Dropdown hidden');
            } else {
                console.log('‚ùå Dropdown menu element not found');
            }
        }

        function toggleDropdown() {
            console.log('üîÑ Toggling dropdown...');
            const dropdown = document.getElementById('categories-dropdown-menu');
            if (dropdown) {
                if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                    dropdown.style.display = 'block';
                    console.log('‚úÖ Dropdown toggled to visible');
                } else {
                    dropdown.style.display = 'none';
                    console.log('‚úÖ Dropdown toggled to hidden');
                }
            } else {
                console.log('‚ùå Dropdown menu element not found');
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('categories-dropdown-menu');
            const dropdownContainer = event.target.closest('.relative');
            
            // If click is outside the dropdown container, close it
            if (dropdown && !dropdownContainer) {
                dropdown.style.display = 'none';
            }
        });
        
        // Load categories for dropdown from database
        async function loadCategoriesDropdown() {
            console.log('üîÑ Loading categories dropdown from database...');
            const dropdownContent = document.getElementById('categories-dropdown');
            
            try {
                // Wait for supabase to be available
                let retries = 0;
                const maxRetries = 30;
                
                while ((!window.supabase && !window.CONFIG?.supabase) && retries < maxRetries) {
                    console.log(`‚è≥ Waiting for Supabase... (attempt ${retries + 1}/${maxRetries})`);
                    await new Promise(resolve => setTimeout(resolve, 200));
                    retries++;
                }
                
                const supabaseClient = window.CONFIG?.supabase || window.supabase;
                if (!supabaseClient) {
                    console.warn('‚ö†Ô∏è Supabase not available, using fallback categories');
                    dropdownContent.innerHTML = getStaticCategoriesDropdown();
                    populateMobileCategoriesStatic();
                    populateTabletCategoriesStatic();
                    return;
                }
                
                // Fetch categories from database
                console.log('üîç Fetching categories from database...');
                const { data: categories, error } = await supabaseClient
                    .from('categories')
                    .select('*')
                    .is('parent_id', null)
                    .eq('is_active', true)
                    .order('name_en');
                
                if (error) {
                    console.error('‚ùå Error fetching categories:', error);
                    dropdownContent.innerHTML = getStaticCategoriesDropdown();
                    return;
                }
                
                if (!categories || categories.length === 0) {
                    console.log('üì¶ No categories found, using fallback');
                    dropdownContent.innerHTML = getStaticCategoriesDropdown();
                    populateMobileCategoriesStatic();
                    populateTabletCategoriesStatic();
                    return;
                }
                
                console.log(`‚úÖ Loaded ${categories.length} categories from database`);
                
                // Create modern dropdown with database categories
                dropdownContent.innerHTML = createDynamicCategoriesDropdown(categories);
                
                // Also populate mobile and tablet dropdowns
                populateMobileCategories(categories);
                populateTabletCategories(categories);
                
            } catch (error) {
                console.error('üí• Error in loadCategoriesDropdown:', error);
                dropdownContent.innerHTML = getStaticCategoriesDropdown();
                // Fallback for mobile/tablet as well
                populateMobileCategoriesStatic();
                populateTabletCategoriesStatic();
            }
        }
        
        // Create static categories dropdown as fallback (compact version)
        function getStaticCategoriesDropdown() {
            console.log('üìã Generating static categories dropdown');
            return `
                <a href="catalog.html?category=brake-system" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-stop-circle text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Brake System</span>
                </a>
                <a href="catalog.html?category=air-pressure" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-wind text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Air Pressure</span>
                </a>
                <a href="catalog.html?category=electrical" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-bolt text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Electrical</span>
                </a>
                <a href="catalog.html?category=chassis-suspension" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-car-side text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Chassis & Suspension</span>
                </a>
                <a href="catalog.html?category=engine-transmission" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-cog text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Engine & Transmission</span>
                </a>
                <a href="catalog.html?category=body-interior" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                    <i class="fas fa-door-open text-red-600 mr-2 text-xs w-4"></i>
                    <span class="text-gray-700 group-hover:text-red-600">Body & Interior</span>
                </a>
            `;
        }
        
        // Create compact categories dropdown
        function createDynamicCategoriesDropdown(categories) {
            const categoryIcons = {
                'brake-system': 'fas fa-stop-circle',
                'air-pressure': 'fas fa-wind', 
                'electrical': 'fas fa-bolt',
                'chassis-suspension': 'fas fa-car-side',
                'engine-transmission': 'fas fa-cog',
                'body-interior': 'fas fa-door-open',
                'hvac': 'fas fa-snowflake',
                'fuel-system': 'fas fa-gas-pump',
                'lighting': 'fas fa-lightbulb',
                'safety': 'fas fa-shield-alt'
            };
            
            // Get current language for translation
            const currentLang = localStorage.getItem('interbus_language') || 'en';
            
            return categories.map(category => {
                const icon = categoryIcons[category.slug] || 'fas fa-cog';
                // Use proper translation based on current language
                const categoryName = category[`name_${currentLang}`] || category.name_en || category.name || 'Unknown Category';
                
                return `
                    <a href="catalog.html?category=${category.slug}" class="flex items-center px-2 py-2 text-sm hover:bg-red-50 rounded transition-colors group">
                        <i class="${icon} text-red-600 mr-2 text-xs w-4"></i>
                        <span class="text-gray-700 group-hover:text-red-600 truncate">${categoryName}</span>
                    </a>
                `;
            }).join('');
        }
        
        // Populate mobile categories dropdown
        function populateMobileCategories(categories) {
            const mobileDropdown = document.getElementById('mobile-categories-dropdown');
            if (!mobileDropdown) return;
            
            const categoryIcons = {
                'brake-system': 'fas fa-stop-circle',
                'air-pressure': 'fas fa-wind', 
                'electrical': 'fas fa-bolt',
                'chassis-suspension': 'fas fa-car-side',
                'engine-transmission': 'fas fa-cog',
                'body-interior': 'fas fa-door-open',
                'hvac': 'fas fa-snowflake',
                'fuel-system': 'fas fa-gas-pump',
                'lighting': 'fas fa-lightbulb',
                'safety': 'fas fa-shield-alt'
            };
            
            // Get current language for translation
            const currentLang = localStorage.getItem('interbus_language') || 'en';
            
            mobileDropdown.innerHTML = categories.map(category => {
                const icon = categoryIcons[category.slug] || 'fas fa-cog';
                // Use proper translation based on current language
                const categoryName = category[`name_${currentLang}`] || category.name_en || category.name || 'Unknown Category';
                
                return `
                    <a href="catalog.html?category=${category.slug}" class="flex items-center px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                        <i class="${icon} mr-3 w-4"></i>${categoryName}
                    </a>
                `;
            }).join('');
        }
        
        // Populate tablet categories dropdown  
        function populateTabletCategories(categories) {
            const tabletDropdown = document.getElementById('tablet-categories-dropdown');
            if (!tabletDropdown) return;
            
            const limitedCategories = categories.slice(0, 6); // Show max 6 categories
            
            // Get current language for translation
            const currentLang = localStorage.getItem('interbus_language') || 'en';
            
            tabletDropdown.innerHTML = `
                <div class="p-3">
                    ${limitedCategories.map(category => {
                        // Use proper translation based on current language
                        const categoryName = category[`name_${currentLang}`] || category.name_en || category.name || 'Unknown Category';
                        return `<a href="catalog.html?category=${category.slug}" class="block px-3 py-2 text-sm text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-md">${categoryName}</a>`;
                    }).join('')}
                    <a href="catalog.html" class="block px-3 py-2 text-sm text-red-600 font-medium border-t mt-2 pt-2">View All ‚Üí</a>
                </div>
            `;
        }
        
        // Static fallback for mobile categories
        function populateMobileCategoriesStatic() {
            const mobileDropdown = document.getElementById('mobile-categories-dropdown');
            if (!mobileDropdown) return;
            
            mobileDropdown.innerHTML = `
                <a href="catalog.html?category=brake-system" class="flex items-center px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                    <i class="fas fa-stop-circle mr-3 w-4"></i>Brake System
                </a>
                <a href="catalog.html?category=electrical" class="flex items-center px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                    <i class="fas fa-bolt mr-3 w-4"></i>Electrical
                </a>
                <a href="catalog.html?category=engine" class="flex items-center px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                    <i class="fas fa-cog mr-3 w-4"></i>Engine
                </a>
            `;
        }
        
        // Static fallback for tablet categories
        function populateTabletCategoriesStatic() {
            const tabletDropdown = document.getElementById('tablet-categories-dropdown');
            if (!tabletDropdown) return;
            
            tabletDropdown.innerHTML = `
                <div class="p-3">
                    <a href="catalog.html?category=brake-system" class="block px-3 py-2 text-sm text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-md">Brake System</a>
                    <a href="catalog.html?category=electrical" class="block px-3 py-2 text-sm text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-md">Electrical</a>
                    <a href="catalog.html?category=engine" class="block px-3 py-2 text-sm text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-md">Engine</a>
                    <a href="catalog.html" class="block px-3 py-2 text-sm text-red-600 font-medium border-t mt-2 pt-2">View All ‚Üí</a>
                </div>
            `;
        }
        
        
        // Create enhanced categories dropdown with subcategories
        function createCoolCategoriesDropdown(categories, subcategories) {
            const currentLang = (window.VanHoolApp && window.VanHoolApp.currentLanguage) ? window.VanHoolApp.currentLanguage : 'en';
            
            // Create category icons mapping
            const categoryIcons = {
                'brake-system': 'fas fa-stop-circle',
                'air-pressure': 'fas fa-wind',
                'chassis-suspension': 'fas fa-car-side',
                'electrical': 'fas fa-bolt',
                'engine-parts': 'fas fa-cogs',
                'transmission': 'fas fa-gear',
                'cooling-system': 'fas fa-snowflake',
                'fuel-system': 'fas fa-gas-pump',
                'exhaust-system': 'fas fa-smog',
                'steering': 'fas fa-steering-wheel',
                'lights': 'fas fa-lightbulb',
                'body-parts': 'fas fa-truck'
            };
            
            // Group subcategories by parent
            const subcategoriesMap = {};
            subcategories.forEach(sub => {
                if (!subcategoriesMap[sub.parent_id]) {
                    subcategoriesMap[sub.parent_id] = [];
                }
                subcategoriesMap[sub.parent_id].push(sub);
            });
            
            return `
                <div class="grid grid-cols-2 gap-6">
                    ${categories.map(category => {
                        const categoryName = category[`name_${currentLang}`] || category.name_en;
                        const categoryIcon = categoryIcons[category.slug] || 'fas fa-cogs';
                        const categorySubs = subcategoriesMap[category.id] || [];
                        
                        return `
                            <div class="category-group">
                                <!-- Main Category -->
                                <a href="catalog.html?category=${category.slug}" 
                                   class="main-category-link flex items-center space-x-3 p-3 rounded-lg hover:bg-red-50 group transition-all duration-200 mb-2 border-2 border-transparent hover:border-red-200">
                                    <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200 shadow-md">
                                        <i class="${categoryIcon} text-white text-lg"></i>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900 group-hover:text-red-600 transition-colors">
                                            ${categoryName}
                                        </h4>
                                        <p class="text-xs text-gray-500 mt-1">
                                            ${categorySubs.length} ${categorySubs.length === 1 ? 'subcategory' : 'subcategories'}
                                        </p>
                                    </div>
                                    <i class="fas fa-arrow-right text-gray-400 group-hover:text-red-600 group-hover:translate-x-1 transition-all duration-200"></i>
                                </a>
                                
                                <!-- Subcategories -->
                                ${categorySubs.length > 0 ? `
                                    <div class="subcategories ml-4 space-y-1">
                                        ${categorySubs.slice(0, 4).map(sub => `
                                            <a href="catalog.html?category=${sub.slug}" 
                                               class="subcategory-link flex items-center space-x-2 py-2 px-3 rounded-md hover:bg-gray-50 group text-sm transition-colors duration-150">
                                                <div class="w-2 h-2 bg-red-400 rounded-full group-hover:bg-red-600 transition-colors"></div>
                                                <span class="text-gray-600 group-hover:text-gray-900 transition-colors">
                                                    ${sub[`name_${currentLang}`] || sub.name_en}
                                                </span>
                                                <i class="fas fa-external-link-alt text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity ml-auto"></i>
                                            </a>
                                        `).join('')}
                                        ${categorySubs.length > 4 ? `
                                            <a href="catalog.html?category=${category.slug}" 
                                               class="inline-flex items-center text-xs text-red-600 hover:text-red-700 ml-4 mt-1">
                                                +${categorySubs.length - 4} more
                                                <i class="fas fa-chevron-right ml-1 text-xs"></i>
                                            </a>
                                        ` : ''}
                                    </div>
                                ` : `
                                    <div class="ml-4 text-xs text-gray-400 italic">No subcategories</div>
                                `}
                            </div>
                        `;
                    }).join('')}
                </div>
                
                <!-- Quick Actions -->
                <div class="mt-6 pt-4 border-t border-gray-200">
                    <div class="grid grid-cols-3 gap-3">
                        <a href="catalog.html?featured=true" class="flex flex-col items-center p-3 rounded-lg hover:bg-yellow-50 group transition-colors">
                            <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mb-2 group-hover:bg-yellow-200 transition-colors">
                                <i class="fas fa-star text-yellow-600 text-sm"></i>
                            </div>
                            <span class="text-xs text-center text-gray-600 group-hover:text-yellow-700">Featured Parts</span>
                        </a>
                        <a href="catalog.html?in_stock=true" class="flex flex-col items-center p-3 rounded-lg hover:bg-green-50 group transition-colors">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mb-2 group-hover:bg-green-200 transition-colors">
                                <i class="fas fa-check-circle text-green-600 text-sm"></i>
                            </div>
                            <span class="text-xs text-center text-gray-600 group-hover:text-green-700">In Stock</span>
                        </a>
                        <a href="catalog.html?sort=price_asc" class="flex flex-col items-center p-3 rounded-lg hover:bg-purple-50 group transition-colors">
                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mb-2 group-hover:bg-purple-200 transition-colors">
                                <i class="fas fa-tag text-purple-600 text-sm"></i>
                            </div>
                            <span class="text-xs text-center text-gray-600 group-hover:text-purple-700">Best Price</span>
                        </a>
                    </div>
                </div>
            `;
        }
        
        
        
        // Load latest products with fallback logic
        async function loadLatestProducts() {
            try {
                const grid = document.getElementById('featured-products');
                
                console.log('üîç Loading latest products from Supabase...');
                
                // Wait for supabase to be available with retries
                let retries = 0;
                const maxRetries = 30;
                
                while ((!window.supabase && !window.CONFIG?.supabase) && retries < maxRetries) {
                    console.log(`‚è≥ Waiting for Supabase and CONFIG... (attempt ${retries + 1}/${maxRetries})`);
                    await new Promise(resolve => setTimeout(resolve, 200));
                    retries++;
                }
                
                // Use the available Supabase client
                const supabaseClient = window.CONFIG?.supabase || window.supabase;
                if (!supabaseClient) {
                    console.warn('‚ö†Ô∏è Supabase client not available after retries, using demo products');
                    grid.innerHTML = getDemoProducts();
                    return;
                }
                
                // Update global reference for compatibility
                if (!window.supabase && window.CONFIG?.supabase) {
                    window.supabase = window.CONFIG.supabase;
                }
                
                if (!window.DB_QUERIES) {
                    console.warn('‚ö†Ô∏è DB_QUERIES not available, using direct Supabase query');
                    
                    // Try direct query for products
                    console.log('üîç Fetching products with direct query...');
                    const { data: products, error } = await window.supabase
                        .from('products')
                        .select('*')
                        .eq('is_active', true)
                        .order('created_at', { ascending: false })
                        .limit(10);
                        
                    if (error) {
                        console.error('‚ùå Featured products query error:', error);
                        console.log('üì¶ Query failed, using demo products');
                        grid.innerHTML = getDemoProducts();
                        return;
                    }
                    
                    if (products && products.length > 0) {
                        console.log(`‚úÖ Loaded ${products.length} products via direct query`);
                        grid.innerHTML = products.map(product => createProductCard(product)).join('');
                        return;
                    } else {
                        console.log('üì¶ No products found, checking database content...');
                        
                        // Check if there are ANY products in the database
                        const { count, error: countError } = await window.supabase
                            .from('products')
                            .select('*', { count: 'exact', head: true });
                        
                        console.log('üìä Total products in database:', count, 'Error:', countError?.message || 'none');
                    }
                    
                    console.log('üì¶ No products found in database, using demo products');
                    grid.innerHTML = getDemoProducts();
                    return;
                }
                
                // Use standardized query for products
                console.log('üîÑ Using DB_QUERIES for products...');
                const productsQuery = window.DB_QUERIES.getProducts({
                    activeOnly: true,
                    inStockOnly: false,
                    limit: 10
                });
                
                if (!productsQuery) {
                    console.warn('‚ö†Ô∏è DB_QUERIES returned null, falling back to direct query');
                    throw new Error('DB_QUERIES returned null');
                }
                
                let { data: products, error } = await productsQuery;
                
                if (error) {
                    console.error('Supabase error:', error);
                    throw error;
                }
                
                if (products && products.length > 0) {
                    console.log(`‚úÖ Loaded ${products.length} products from database`);
                    grid.innerHTML = products.map(product => createProductCard(product)).join('');
                } else {
                    console.log('üì¶ No products found via DB_QUERIES, using demo products');
                    grid.innerHTML = getDemoProducts();
                }
                
            } catch (error) {
                console.error('‚ùå Error loading products:', error);
                console.error('Error details:', {
                    message: error.message,
                    code: error.code,
                    details: error.details,
                    hint: error.hint
                });
                
                // Try to test Supabase connection
                try {
                    console.log('üîç Testing Supabase connection...');
                    const { data, error: testError } = await window.supabase
                        .from('products')
                        .select('count', { count: 'exact', head: true });
                    
                    if (testError) {
                        console.error('‚ùå Supabase connection test failed:', testError);
                    } else {
                        console.log('‚úÖ Supabase connection OK, total products count:', data);
                    }
                } catch (testErr) {
                    console.error('‚ùå Supabase connection test error:', testErr);
                }
                
                console.log('üì¶ Using demo products as fallback due to error');
                document.getElementById('featured-products').innerHTML = getDemoProducts();
            }
        }
        
        function createProductCard(product) {
            const currentLang = window.VanHoolApp?.currentLanguage || 'en';
            const translate = window.translate || ((key) => {
                const fallbackTranslations = {
                    'in_stock': 'In Stock',
                    'out_of_stock': 'Out of Stock',
                    'add_to_cart': 'Add to Cart'
                };
                return fallbackTranslations[key] || key;
            });
            
            return `
                <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border">
                    <a href="product.html?id=${product.id}">
                        <div class="aspect-w-1 aspect-h-1 bg-gray-100">
                            ${product.image_url ? 
                                `<img src="${product.image_url}" alt="${product[`name_${currentLang}`] || product.name_en || product.name}" class="w-full h-48 object-cover">` :
                                `<div class="w-full h-48 bg-gray-200 flex items-center justify-center">
                                    <i class="fas fa-image text-gray-400 text-4xl"></i>
                                </div>`
                            }
                        </div>
                        <div class="p-4">
                            <div class="text-sm text-red-600 font-medium mb-1">${product.part_code || product.sku || 'N/A'}</div>
                            <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2">
                                ${product[`name_${currentLang}`] || product.name_en || product.name || 'Product'}
                            </h3>
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-bold text-gray-900">‚Ç¨${product.price}</span>
                                <span class="text-sm ${product.stock_quantity > 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${product.stock_quantity > 0 ? translate('in_stock') : translate('out_of_stock')}
                                </span>
                            </div>
                        </div>
                    </a>
                    <div class="px-4 pb-4">
                        <button onclick="addToCart('${product.id}')" 
                                class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors ${product.stock_quantity === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                                ${product.stock_quantity === 0 ? 'disabled' : ''}>
                            <i class="fas fa-cart-plus mr-2"></i>
                            ${translate('add_to_cart')}
                        </button>
                    </div>
                </div>
            `;
        }
        
        
        function getDemoProducts() {
            return `
                <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border">
                    <a href="product.html?id=1&code=VH-BP-F-AG300-001" class="block">
                        <div class="aspect-w-1 aspect-h-1 bg-gray-100">
                            <div class="w-full h-48 bg-gray-200 flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-4xl"></i>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="text-sm text-red-600 font-medium mb-1">VH-BP-F-AG300-001</div>
                            <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2">Front Brake Pads AG300</h3>
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-lg font-bold text-gray-900">‚Ç¨125.99</span>
                                <span class="text-sm text-green-600">In Stock</span>
                            </div>
                        </div>
                    </a>
                    <div class="px-4 pb-4">
                        <button onclick="addToCart('1')" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors">
                            <i class="fas fa-cart-plus mr-2"></i>Add to Cart
                        </button>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border">
                    <a href="product.html?id=2&code=VH-AS-R-A330-002" class="block">
                        <div class="aspect-w-1 aspect-h-1 bg-gray-100">
                            <div class="w-full h-48 bg-gray-200 flex items-center justify-center">
                                <i class="fas fa-image text-gray-400 text-4xl"></i>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="text-sm text-red-600 font-medium mb-1">VH-AS-R-A330-002</div>
                            <h3 class="font-semibold text-gray-900 mb-2 line-clamp-2">Rear Air Suspension A330</h3>
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-lg font-bold text-gray-900">‚Ç¨890.50</span>
                                <span class="text-sm text-green-600">In Stock</span>
                            </div>
                        </div>
                    </a>
                    <div class="px-4 pb-4">
                        <button onclick="addToCart('2')" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors">
                            <i class="fas fa-cart-plus mr-2"></i>Add to Cart
                        </button>
                    </div>
                </div>
            `;
        }
        
        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Mobile categories toggle
        document.addEventListener('DOMContentLoaded', function() {
            const categoriesToggle = document.getElementById('mobile-categories-toggle');
            const categoriesDropdown = document.getElementById('mobile-categories-dropdown');
            const chevronIcon = categoriesToggle?.querySelector('.fa-chevron-down');

            if (categoriesToggle && categoriesDropdown) {
                categoriesToggle.addEventListener('click', function() {
                    const isHidden = categoriesDropdown.classList.contains('hidden');
                    categoriesDropdown.classList.toggle('hidden');
                    
                    // Rotate chevron icon
                    if (chevronIcon) {
                        if (isHidden) {
                            chevronIcon.style.transform = 'rotate(180deg)';
                        } else {
                            chevronIcon.style.transform = 'rotate(0deg)';
                        }
                    }
                });
            }
        });
        
        // Cart functionality
        window.addToCart = async function(productId, quantity = 1) {
            try {
                // Wait for cart manager to be available
                if (!window.cartManager) {
                    console.warn('Cart manager not available yet, waiting...');
                    await new Promise(resolve => {
                        const checkCartManager = () => {
                            if (window.cartManager) {
                                resolve();
                            } else {
                                setTimeout(checkCartManager, 100);
                            }
                        };
                        checkCartManager();
                    });
                }
                
                // Try to get product data from database first
                let productData = null;
                
                try {
                    if (window.DB_QUERIES) {
                        console.log('üîç Fetching product from database with ID:', productId);
                        const { data: product, error } = await window.DB_QUERIES.getProduct(productId);
                            
                        if (error) {
                            console.warn('‚ö†Ô∏è Database query error:', error);
                            if (error.code !== 'PGRST116') { // Not found is OK, other errors log
                                console.error('Database error:', error);
                            }
                        }
                            
                        if (!error && product) {
                            console.log('‚úÖ Product found in database:', product);
                            productData = product;
                        } else {
                            console.log('‚ùå Product not found in database, will try demo products');
                        }
                    } else {
                        console.warn('‚ö†Ô∏è DB_QUERIES not available, using demo products only');
                    }
                } catch (error) {
                    console.error('‚ùå Error fetching product from database:', error);
                }
                
                // Fallback to demo products if not found in database
                if (!productData) {
                    if (productId === '1') {
                        productData = {
                            id: productId,
                            name_en: 'Front Brake Pads AG300',
                            name: 'Front Brake Pads AG300',
                            part_code: 'VH-BP-F-AG300-001',
                            sku: 'VH-BP-F-AG300-001',
                            price: 125.99,
                            sale_price: null,
                            stock_quantity: 10,
                            is_active: true,
                            image_url: '/images/placeholder.svg',
                            images: ['/images/placeholder.svg'],
                            categories: { name: 'Brake System' },
                            brands: { name: 'Inter Bus' }
                        };
                    } else if (productId === '2') {
                        productData = {
                            id: productId,
                            name_en: 'Rear Air Suspension A330',
                            name: 'Rear Air Suspension A330',
                            part_code: 'VH-AS-R-A330-002',
                            sku: 'VH-AS-R-A330-002',
                            price: 890.50,
                            sale_price: null,
                            stock_quantity: 5,
                            is_active: true,
                            image_url: '/images/placeholder.svg',
                            images: ['/images/placeholder.svg'],
                            categories: { name: 'Air Pressure System' },
                            brands: { name: 'Inter Bus' }
                        };
                    }
                }
                
                if (!productData) {
                    console.error('‚ùå No product data available for ID:', productId);
                    showNotification('Produsul nu a fost gƒÉsit', 'error');
                    return;
                }
                
                console.log('üõí Adding product to cart:', {
                    id: productData.id,
                    name: productData.name_en || productData.name,
                    price: productData.price,
                    quantity: quantity
                });
                
                // Add to cart using the same approach as product.html
                const result = await window.cartManager.addItem(productData.id, quantity, {
                    productDetails: {
                        ...productData,
                        is_active: productData.is_active !== undefined ? productData.is_active : true,
                        stock_quantity: productData.stock_quantity || 10
                    },
                    name: productData.name_en || productData.name || productData.name_ro || 'Product',
                    sku: productData.part_code || productData.sku || 'N/A',
                    price: productData.sale_price || productData.price,
                    originalPrice: productData.price,
                    image: productData.image_url || (productData.images && productData.images[0]) || '/images/placeholder.svg',
                    category: productData.categories?.name || productData.category || '',
                    brand: productData.brands?.name || productData.brand || ''
                });
                
                console.log('üìä Cart addition result:', result);
                
                if (result.success) {
                    console.log('‚úÖ Product successfully added to cart');
                    showNotification(result.message || 'Produs adƒÉugat √Æn co»ô cu succes!', 'success');
                    updateCartCounter();
                } else {
                    console.error('‚ùå Failed to add product to cart:', result.error);
                    showNotification(result.error || 'Eroare la adƒÉugarea √Æn co»ô', 'error');
                }
                
            } catch (error) {
                console.error('üí• Error adding to cart:', error);
                showNotification('Eroare la adƒÉugarea √Æn co»ô', 'error');
            }
        };
        
        // Update cart counter in navigation
        function updateCartCounter() {
            if (window.cartManager) {
                const itemCount = window.cartManager.getItemCount();
                const counter = document.getElementById('cart-counter');
                const mobileCounter = document.getElementById('mobile-cart-counter');
                
                if (itemCount > 0) {
                    if (counter) {
                        counter.textContent = itemCount;
                        counter.classList.remove('hidden');
                    }
                    if (mobileCounter) {
                        mobileCounter.textContent = itemCount;
                        mobileCounter.classList.remove('hidden');
                    }
                } else {
                    if (counter) counter.classList.add('hidden');
                    if (mobileCounter) mobileCounter.classList.add('hidden');
                }
            }
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            // Remove existing notifications
            const existing = document.querySelectorAll('.cart-notification');
            existing.forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = `cart-notification fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 max-w-sm ${
                type === 'error' ? 'bg-red-100 border border-red-400 text-red-700' :
                type === 'success' ? 'bg-green-100 border border-green-400 text-green-700' :
                'bg-red-100 border border-red-400 text-red-700'
            }`;
            
            notification.innerHTML = `
                <div class="flex items-start">
                    <i class="fas ${
                        type === 'error' ? 'fa-exclamation-circle' :
                        type === 'success' ? 'fa-check-circle' :
                        'fa-info-circle'
                    } mt-0.5 mr-2 flex-shrink-0"></i>
                    <div class="flex-1">${message}</div>
                    <button type="button" class="ml-3 flex-shrink-0 hover:opacity-75" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 4000);
        }
        
        // Language dropdown toggle
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('language-dropdown');
            dropdown.classList.toggle('hidden');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('language-dropdown');
            const button = event.target.closest('button[onclick*="toggleLanguageDropdown"]');
            
            if (!button && !dropdown.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });
        
        // Listen for cart changes to update counter
        document.addEventListener('DOMContentLoaded', function() {
            // Initial counter update
            setTimeout(updateCartCounter, 1000);
            
            // Listen for cart events if cart manager becomes available
            const checkForCartManager = () => {
                if (window.cartManager) {
                    window.cartManager.addListener((event) => {
                        if (['item_added', 'item_removed', 'item_updated', 'cart_cleared', 'cart_synced'].includes(event)) {
                            updateCartCounter();
                        }
                    });
                } else {
                    setTimeout(checkForCartManager, 500);
                }
            };
            checkForCartManager();
            
            // Listen for global cart count updates
            window.addEventListener('cartCountUpdated', function(event) {
                const count = event.detail.count;
                updateCartCounter();
            });
        });
        
        // Initialize page after universal system loads
        window.addEventListener('load', function() {
            console.log('üöÄ Page fully loaded, initializing...');
            // Load categories for the dropdown navigation
            loadCategoriesDropdown();
            loadLatestProducts();
            updateCartCounter(); // Update cart counter on page load
            console.log('‚úÖ Page initialization complete');
        });
        
        // Also try to load products when DOM is ready as backup
        document.addEventListener('DOMContentLoaded', function() {
            // Add a delay to ensure universal app is loaded
            setTimeout(() => {
                loadLatestProducts();
            }, 1000);
        });
    </script>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="md:col-span-2">
                    <div class="flex items-center mb-4">
                        <img src="LOGO1 1.svg" alt="Inter Bus" class="h-8 w-auto mr-3">
                        <span class="text-xl font-bold">Inter Bus</span>
                    </div>
                    <p class="text-gray-400 mb-4" data-translate="footer_description">
                        Your trusted partner for authentic bus parts and components worldwide.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="font-semibold mb-4" data-translate="quick_links">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors" data-translate="home">Home</a></li>
                        <li><a href="catalog.html" class="text-gray-400 hover:text-white transition-colors" data-translate="catalog">Catalog</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-white transition-colors" data-translate="about">About</a></li>
                        <li><a href="#contact" class="text-gray-400 hover:text-white transition-colors" data-translate="contact">Contact</a></li>
                    </ul>
                </div>
                
                <!-- Contact -->
                <div>
                    <h4 class="font-semibold mb-4" data-translate="contact">Contact</h4>
                    <ul class="space-y-2">
                        <li class="text-gray-400">
                            <i class="fas fa-phone mr-2"></i>
                            +373 123 456 789
                        </li>
                        <li class="text-gray-400">
                            <i class="fas fa-envelope mr-2"></i>
                            contact@interbus.md
                        </li>
                        <li class="text-gray-400">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span data-translate="address">Chi»ôinƒÉu, Moldova</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-8 mt-8 text-center text-gray-400">
                <p>&copy; 2025 Inter Bus. <span data-translate="all_rights_reserved">All rights reserved.</span></p>
            </div>
        </div>
    </footer>
</body>
</html>